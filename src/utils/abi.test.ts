import { encode } from './abi';
import { bytesToHex } from './buffer';

describe('encode', () => {
  it('encodes types and values to ABI', () => {
    expect(bytesToHex(encode(['uint256', 'uint256'], [12345, 56789]))).toBe(
      '0000000000000000000000000000000000000000000000000000000000003039000000000000000000000000000000000000000000000000000000000000ddd5'
    );
    expect(bytesToHex(encode(['bytes32', 'string'], ['0x123456789', 'foo bar']))).toBe(
      '123456780000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000007666f6f2062617200000000000000000000000000000000000000000000000000'
    );
    expect(
      bytesToHex(encode(['bytes32', 'address'], ['0x123456789', 'cfx:aak2rra2njvd77ezwjvx04kkds9fzagfe6ku8scz91']))
    ).toBe(
      '12345678000000000000000000000000000000000000000000000000000000000000000000000000000000001386b4185a223ef49592233b69291bbe5a80c527'
    );
    expect(
      bytesToHex(encode(['bytes32', 'address'], ['0x123456789', '0x1386b4185a223ef49592233b69291bbe5a80c527']))
    ).toBe(
      '12345678000000000000000000000000000000000000000000000000000000000000000000000000000000001386b4185a223ef49592233b69291bbe5a80c527'
    );
  });
});
